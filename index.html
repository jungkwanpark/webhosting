<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta name="description" content="">
        <meta name="author" content="">

        <title>Home | Coming Soon Page</title>

        <!-- CSS FILES -->                
        <link rel="preconnect" href="https://fonts.googleapis.com">
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,400;0,700;1,200&family=Unbounded:wght@400;700&display=swap" rel="stylesheet">
        
        <link href="css/bootstrap.min.css" rel="stylesheet">

        <link href="css/bootstrap-icons.css" rel="stylesheet">

        <link href="css/tooplate-kool-form-pack.css" rel="stylesheet">
        
<!--

Tooplate 2136 Kool Form Pack

https://www.tooplate.com/view/2136-kool-form-pack

Bootstrap 5 Form Pack Template

-->
    </head>
    
    <body>

        <main>

            <header class="site-header">
                <div class="container" style="background: transparent;">
                    <div class="row justify-content-between">

                        <div class="col-lg-12 col-12 d-flex align-items-center">
                            <a class="site-header-text d-flex justify-content-center align-items-center me-auto" href="index.html">
                                <i class="bi-box"></i>

                                <span>
                                    Home
                                </span>
                            </a>

                            <div>
                                <a href="#" class="custom-btn custom-border-btn btn" data-bs-toggle="modal" data-bs-target="#subscribeModal">Feedback
                                    <i class="bi-arrow-right ms-2"></i>
                                </a>
                            </div>

                            <a class="bi-list offcanvas-icon" data-bs-toggle="offcanvas" href="#offcanvasMenu" role="button" aria-controls="offcanvasMenu"></a>

                        </div>

                    </div>
                </div>
            </header>

            <div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel">                
                <div class="offcanvas-header">                    
                    <button type="button" class="btn-close ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                
                <div class="offcanvas-body d-flex flex-column justify-content-center align-items-center">
                    <nav>
                        <ul>
                            <li>
                                <a href="login.html">Login Form</a>
                            </li>

                            <li>
                                <a href="register.html">Create an account</a>
                            </li>

                            <li>
                                <a href="password-reset.html">Password Reset</a>
                            </li>

                            <li>
                                <a href="contact.html">Contact Form</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="subscribeModal" tabindex="-1" aria-labelledby="subscribeModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                        <div class="modal-body">
                            <!--
                            <form action="#" method="get" class="custom-form mt-lg-4 mt-2" role="form">
                                <h2 class="modal-title" id="subscribeModalLabel">서비스 런칭시 알람 받으실 이메일</h2>

                                <input type="email" name="email" id="email" pattern="[^ @]*@[^ @]*" class="form-control" placeholder="your@email.com" required="">

                                <button type="submit" class="form-control">Notify</button>
                            </form>
                            -->

                            <!--
                            <center>
                                <p>이메일을 남겨주시면 서비스가 런칭되었을 때 알림을 드리겠습니다. </p>
                                <input id="submit-email" type="email" placeholder="알림을 받으실 이메일" /> <br><br>
                                <p>서비스가 이렇게 되었으면 좋겠다는 조언을 해 주세요 </p>
                                <textarea id="submit-advice" name="Text1" cols="20" rows="1" placeholder="서비스에 대한 조언을 남겨주세요"></textarea><br>
                                <button style="width:350px;" id="submit">지금 제출! </button>
                              </center>
                             -->

                            <center>
                                <p style="color: white;">이메일을 남겨주시면 <br>
                                    향후 서비스 런칭 소식을 <br>
                                    전달드리겠습니다.</p>
                                <input id="submit-email" type="email" placeholder="Your Email Address" style="color: black;" /> <br><br>
                                <p style="color: white;">서비스 품질 향상을 위한 <br>
                                     조언 및 피드백을 남겨주세요.</p>
                                <textarea id="submit-advice" name="Text1" cols="20" rows="1" placeholder="Your Suggestion" style="color: black; width: 350px; height: 50px;"></textarea><br>
                                <button style="width:350px;" id="submit">Submit</button>
                              </center>
                              
                              <div id="popup" style="display:none; text-align: center; width: 30%; margin: 0 auto;">
                                <h1 style="font-size: 24px; color: black; margin: 0; margin-bottom: 15px;">소중한 의견 감사드립니다.</h1>
                                <p style="font-size: 18px; color: black; margin: 0;">여러분의 의견을 반영하여 더 나은 서비스로 찾아뵙겠습니다.</p>
                              </div>
                              
                        </div>

                        <div class="modal-footer justify-content-center">
                            <p>By signing up, you agree to our Privacy Notice</p>
                        </div>
                    </div>
                </div>
            </div>

            <section class="hero-section d-flex justify-content-center align-items-center" id="section_1">
                <div class="container">
                    <div class="row">
                  
                      <!-- 메시지 영역 -->

                      <div class="col-lg-6 col-12 mx-auto" 
                           style="text-align: center; position: sticky; top: 0; z-index: 10; 
                                 display: flex; flex-direction: column; justify-content: center; align-items: center; 
                                 height: 50vh; padding-bottom: 20px; ">
                        <h1 class="text-white mt-2 mb-4 pb-2">
                          <br>
                          <br>
                          <br>
                          <span style="display: block; margin-bottom: 12px;">국내 개발자 및 엔지니어용</span>
                          <span style="display: block; margin-bottom: 12px;">해외 기술문서 요약 서비스</span>
                        </h1>
                      </div>
                  
                      <!-- URL 입력 및 결과 박스 영역 -->
                      <div class="col-lg-6 col-12 mx-auto">
                        <div class="container" style="margin-bottom: 15px;">
                          <label for="urlInput" style="color: white; font-size: 18px; font-weight: bold;">문서  주소  입력</label>
                          <input type="text" id="urlInput" placeholder="URL을 입력하세요" 
                            style="color: black; font-size: 15px; width: 100%; height: 30px; padding: 10px; margin-top: 5px; margin-bottom: 5px; border-radius: 5px;">
                          <button id="processButton" 
                                  style="color: black; font-size: 15px; font-style: normal; font-weight: bold;
                                        width: 150; height: 25px; padding: 10px; border-radius: 5px;
                                        text-align: center; display: inline-flex; justify-content: center; align-items: center;">Submit</button>
                      </div>
                  
                        <!-- 요약 결과 -->
                        <div class="container" style="margin-bottom: 15px;">
                            <label for="summaryResult" 
                                   style="color: white; font-size: 18px; font-weight: bold; height: auto;">문서  요약  결과</label>
                            <textarea id="summaryResult" readonly
                                      style="color: black; font-size: 12px; width: 100%; padding: 10px; min-height: 100px; max-height: 200px; 
                                             overflow-y: auto; resize: none;"></textarea>
                        </div>
                        
                        <!-- 번역 결과 -->
                        <div class="container" style="margin-bottom: 15px;">
                            <label for="translationResult" 
                                   style="color: white; font-size: 18px; font-weight: bold; height: auto;">문서  번역  결과</label>
                            <textarea id="translationResult" readonly
                                      style="color: black; font-size: 12px; width: 100%; padding: 10px; min-height: 150px; max-height: 1000px; 
                                             overflow-y: auto; resize: none;"></textarea>
                        </div>
                      </div>
                      
                    </div>
                  </div>

                  

                <style>
                    .custom-video {
                      height: 50%; /* 세로 크기 줄임 */
                      width: 100%; /* 가로 크기 유지 */
                    }
                </style>

                <div class="video-wrap">
                    <video autoplay="" loop="" muted="" class="custom-video" poster="" style="width: 100%; height: 100%;">
                        <source src="videos/video.mp4" type="video/mp4">

                        Your browser does not support the video tag.
                    </video>
                </div>
               
            </section>

        </main>

        <!-- JAVASCRIPT FILES -->

        <!--
        <script>
            function formatTextForDisplay(text) {
                // 문장을 마침표를 기준으로 분리하고, 각 문장에 띄어쓰기를 추가하여 출력
                return text.split(/[.!?]/).map(sentence => sentence.trim()).filter(Boolean).join('\n\n');
            }       
      
            // '요약 결과' 박스에 텍스트 출력
            document.getElementById('summaryResult').value = formatTextForDisplay(summaryText);
        
            // '번역 결과' 박스에 텍스트 출력
            document.getElementById('translationResult').value = formatTextForDisplay(translationText);
        </script>
        -->


        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script src="js/countdown.js"></script>
        <script src="js/init.js"></script>
        
                <!-- 수업 내용 시작 부분 -->
                <!--
                <center>
                    <p>이메일을 남겨주시면 서비스가 런칭되었을 때 알림을 드리겠습니다. </p>
                    <input id="submit-email" type="email" placeholder="알림을 받으실 이메일" /> <br><br>
                    <p>서비스가 이렇게 되었으면 좋겠다는 조언을 해 주세요 </p>
                    <textarea id="submit-advice" name="Text1" cols="40" rows="1" placeholder="서비스에 대한 조언을 남겨주세요"></textarea><br>
                    <button style="width:350px;" id="submit">지금 제출! </button>
                  </center>
  
                  <div id="popup" style="display:none;">
                    <h1>소중한 의견 감사합니다. </h1>
                  <p>여러분의 의견을 반영하여 더 나은 서비스로 찾아뵙도록 하겠습니다.</p>
                -->
        <script type="application/javascript">
            var ip = "null";
            function getIP(json) {
                console.log(json);
                try {
                ip = json.ip;
                } catch (e) {
                ip = 'unknown';
                }
                return;
            }
            </script>
            <script type="application/javascript" src="https://jsonip.com?format=jsonp&callback=getIP"></script>
        
          <script>
        
            // 쿠키에서 값을 가져오는 함수
            function getCookieValue(name) {
                            const value = "; " + document.cookie;
                            const parts = value.split("; " + name + "=");
                            if (parts.length === 2) {
                                return parts.pop().split(";").shift();
                            }
                        }
        
                        // 쿠키에 값을 저장하는 함수
                        function setCookieValue(name, value, days) {
                            let expires = "";
                            if (days) {
                                const date = new Date();
                                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                                expires = "; expires=" + date.toUTCString();
                            }
                            document.cookie = name + "=" + (value || "") + expires + "; path=/";
                        }
        
                function getUVfromCookie() {
                            // 6자리 임의의 문자열 생성
                            const hash = Math.random().toString(36).substring(2, 8).toUpperCase();
                            // 쿠키에서 기존 해시 값을 가져옴
                            const existingHash = getCookieValue("user");
                            // 기존 해시 값이 없으면, 새로운 해시 값을 쿠키에 저장
                            if (!existingHash) {
                                setCookieValue("user", hash, 180); // 쿠키 만료일은 6개월 
                                return hash;
                            } else {
                                // 기존 해시 값이 있으면, 기존 값을 반환
                                return existingHash;
                            }
                        }
                
                // Sam pading value to start with 0. eg: 01, 02, .. 09, 10, ..
                        function padValue(value) {
                            return (value < 10) ? "0" + value : value;
                        }
        
                        function getTimeStamp() {
                            const date = new Date();
        
                            const year = date.getFullYear();
                            const month = date.getMonth() + 1;
                            const day = date.getDate();
                            const hours = date.getHours();
                            const minutes = date.getMinutes();
                            const seconds = date.getSeconds();
        
                            const formattedDate = `${padValue(year)}-${padValue(month)}-${padValue(day)} ${padValue(hours)}:${padValue(minutes)}:${padValue(seconds)}`;
        
                            return formattedDate;
                        }
        
                var queryString = location.search;
                        const urlParams = new URLSearchParams(queryString);
                        const utm = urlParams.get("utm");
        
                var mobile = 'desktop';
                        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                            // true for mobile device
                            mobile = 'mobile';
                        }
        
          </script>
        
        <script src="https://code.jquery.com/jquery-latest.min.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        
        <script src="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.css" rel="stylesheet">
        
        <script src="https://cdn.jsdelivr.net/gh/dinoqqq/simple-popup@master/dist/jquery.simple-popup.min.js"></script>
          <link href="https://cdn.jsdelivr.net/gh/dinoqqq/simple-popup@master/dist/jquery.simple-popup.min.css" rel="stylesheet" type="text/css" />
        
          <script>
            $("#submit").on("click", function () {
        
                  $.busyLoadFull("show");
        
                            const email = $("#submit-email").val();
                            const advice = $("#submit-advice").val();
                    
                            function validateEmail(email) {
                                var re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
                                return re.test(email);
                            }
                    
                            if (email == '' || !validateEmail(email)) {
                                alert("이메일이 유효하지 않아 알림을 드릴 수가 없습니다. ");
                                return;
                            }
                    
                            var finalData = JSON.stringify({
                                "id": getUVfromCookie(),
                                "email": email,
                                "advice": advice
                            })
                    
                            axios.get('https://script.google.com/macros/s/AKfycbyY4iBBJOh0_S743vimsOy7QF5QbSgENqOTLv6zvk77DmxfkRVPNSLgiRcQtOyFMKfMZg/exec?action=insert&table=registration&data=' + finalData)
                              .then(response => {
                                console.log(response.data.data);
                                //alert(JSON.stringify(response));
                      $.busyLoadFull("hide");
                      $.fn.simplePopup({ type: "html", htmlSelector: "#popup" });
                                  $('#submit-email').val('');
                                  $('#submit-advice').val('');
                              })
                            });
        
            /* data를 만들 땐 모든 field가 들어 있어야 함 */
            var data = JSON.stringify(
                                           {"id": getUVfromCookie(),
                                    "landingUrl":window.location.href, 
                                    "ip":ip, 
                                    "referer":document.referrer,
                                    "time_stamp":getTimeStamp(), 
                                    "utm":utm,
                                    "device":mobile}
                                    );
        
                        $(document).ready(function () {
        
                            addrScript = 'https://script.google.com/macros/s/AKfycbyY4iBBJOh0_S743vimsOy7QF5QbSgENqOTLv6zvk77DmxfkRVPNSLgiRcQtOyFMKfMZg/exec';
        
                            axios.get(addrScript+'?action=insert&table=visitor&data='+data)
                                         .then(response => {
                                                    console.log(JSON.stringify(response));
                                                    $('<div id="result" style="font-size:10px; width:200px; word-wrap: break-word; text-overflow: ellipsis; overflow:hidden"></div>').appendTo('#wrapper');
                                                    $('#result').text(JSON.stringify(response));
                                                })
        
                                });
          </script>
        <!-- 수업 내용 끝 부분 -->

        <script>
            document.getElementById('processButton').addEventListener('click', async () => {
              
              //$.busyLoadFull("show");

              // URL입력 데이터를 urlInput 변수에 저장
              const urlInput = document.getElementById('urlInput').value;
        
              // URL 형식 및 유효성 체크
              if (!urlInput) {
                alert('Please enter a valid URL.');
                return;
              }
        
              // HTTP POST 본문 내용을 JSON 형식으로 구성하여 payload 변수에 저장
              const payload = { "url": urlInput };
        
              try {
                // Python 백엔드 어플리케이션 서버로 POST 요청 전달 (JSON 본문 형식)
                const response = await fetch('https://b9eb-34-139-2-234.ngrok-free.app', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json'
                  },
                  body: JSON.stringify(payload)
                });
        
                // JSON 본문 응답 내용을 파싱
                const data = await response.json();
        
                // Debugging: Log the data to see the actual response
                console.log(data);

                // Extract "번역 결과" and "요약 결과"
                // const summaryResult = data["summary"] || 'No summary result found.';
                // const translationResult = data["translated_text"] || 'No translation result found.';
                       

                // UTF-8 디코딩이 필요할 경우 수동 처리
                const decoder = new TextDecoder('utf-8');
                const rawSummary = data.result.summary || 'No summary result found.';
                const rawTranslation = data.result.translated_text || 'No translation result found.';

                // 디코드된 문자열로 변환
                const summaryResult = decoder.decode(new TextEncoder().encode(rawSummary));
                const translationResult = decoder.decode(new TextEncoder().encode(rawTranslation));



                // Display results in the respective textareas
                document.getElementById('summaryResult').value = summaryResult;
                document.getElementById('translationResult').value = translationResult;
              } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while processing the URL.');
              }
            });
          </script>

    </body>
</html>
